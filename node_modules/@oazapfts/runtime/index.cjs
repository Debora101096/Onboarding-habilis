"use strict";var k=Object.defineProperty,F=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var g=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var r in t||(t={}))j.call(t,r)&&E(e,r,t[r]);if(g)for(var r of g(t))O.call(t,r)&&E(e,r,t[r]);return e},l=(e,t)=>F(e,x(t));var S=(e,t)=>{var r={};for(var s in e)j.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&g)for(var s of g(e))t.indexOf(s)<0&&O.call(e,s)&&(r[s]=e[s]);return r};var b=(e,t,r)=>E(e,typeof t!="symbol"?t+"":t,r);var m=(e,t,r)=>new Promise((s,f)=>{var n=a=>{try{c(r.next(a))}catch(o){f(o)}},i=a=>{try{c(r.throw(a))}catch(o){f(o)}},c=a=>a.done?s(a.value):Promise.resolve(a.value).then(n,i);c((r=r.apply(e,t)).next())});Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const A=require("./query.cjs"),U=require("./util.cjs"),w=require("./headers.cjs");function B(e={}){function t(n,i){return m(this,null,function*(){const c=yield f(n,i);let a;try{a=yield c.text()}catch(o){}return{status:c.status,headers:c.headers,contentType:c.headers.get("content-type"),data:a}})}function r(c){return m(this,arguments,function*(n,i={}){const{status:a,headers:o,contentType:u,data:p}=yield t(n,l(h({},i),{headers:w.mergeHeaders({Accept:"application/json"},i.headers)}));return(u?u.includes("json"):!1)?{status:a,headers:o,data:p?JSON.parse(p):null}:{status:a,headers:o,data:p}})}function s(c){return m(this,arguments,function*(n,i={}){const a=yield f(n,i);let o;try{o=yield a.blob()}catch(u){}return{status:a.status,headers:a.headers,data:o}})}function f(c){return m(this,arguments,function*(n,i={}){const d=l(h(h({},e),i),{headers:w.mergeHeaders(e.headers,i.headers)}),{baseUrl:a,fetch:o}=d,u=S(d,["baseUrl","fetch"]),p=U.joinUrl(a,n);return yield(o||fetch)(p,u)})}return{ok:H,fetchText:t,fetchJson:r,fetchBlob:s,mergeHeaders:w.mergeHeaders,json(a){var o=a,{body:n,headers:i}=o,c=S(o,["body","headers"]);return l(h(h({},c),n!=null&&{body:JSON.stringify(n)}),{headers:w.mergeHeaders({"Content-Type":"application/json"},i)})},form(a){var o=a,{body:n,headers:i}=o,c=S(o,["body","headers"]);return l(h(h({},c),n!=null&&{body:A.form(n)}),{headers:w.mergeHeaders({"Content-Type":"application/x-www-form-urlencoded"},i)})},multipart(a){var o=a,{body:n,headers:i}=o,c=S(o,["body","headers"]);if(n==null)return l(h({},c),{body:n,headers:w.normalizeHeaders(i)});const u=new(c.FormData||c.formDataConstructor||e.FormData||e.formDataConstructor||FormData),p=(y,d)=>{typeof d=="string"||d instanceof Blob?u.append(y,d):typeof d=="number"||typeof d=="boolean"?u.append(y,String(d)):u.append(y,new Blob([JSON.stringify(d)],{type:"application/json"}))};return Object.entries(n).forEach(([y,d])=>{Array.isArray(d)?d.forEach(T=>p(y,T)):p(y,d)}),l(h({},c),{body:u,headers:w.normalizeHeaders(i)})}}}function N(e,t){return m(this,null,function*(){const{status:r,data:s,headers:f}=yield e,n=t[r];if(n)return n(s);if(t.default)return t.default(r,s);throw new C(r,s,f)})}const D=[200,201,202,204];function H(e){return m(this,null,function*(){const t=yield e;if(D.some(r=>r==t.status))return t.data;throw new C(t.status,t.data,t.headers)})}function J(e){return(...t)=>H(e(...t))}function z(e){const t={};return Object.entries(e).forEach(([r,s])=>{t[r]=typeof s=="function"?J(s):s}),t}class C extends Error{constructor(r,s,f){super(`Error: ${r}`);b(this,"status");b(this,"data");b(this,"headers");this.status=r,this.data=s,this.headers=f}}exports.HttpError=C;exports.SUCCESS_CODES=D;exports.handle=N;exports.ok=H;exports.okify=J;exports.optimistic=z;exports.runtime=B;
//# sourceMappingURL=index.cjs.map
