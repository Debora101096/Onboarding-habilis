{"version":3,"file":"cli.js","sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport fs from \"fs\";\nimport minimist from \"minimist\";\n\nimport { generateSource, Opts, optsArgumentStyles } from \"./\";\n\nconst argv = minimist(process.argv.slice(2), {\n  alias: {\n    i: \"include\",\n    e: \"exclude\",\n  },\n  boolean: [\"optimistic\", \"useEnumType\", \"mergeReadWriteOnly\", \"useUnknown\"],\n  string: [\"argumentStyle\"],\n});\n\nasync function generate(spec: string, dest: string, opts: Opts) {\n  const code = await generateSource(spec, opts);\n  if (dest) fs.writeFileSync(dest, code);\n  else console.log(code);\n}\n\nconst {\n  include,\n  exclude,\n  optimistic,\n  useEnumType,\n  mergeReadWriteOnly,\n  useUnknown,\n  argumentStyle,\n} = argv;\nconst [spec, dest] = argv._;\nif (!spec) {\n  console.error(`\n    Usage:\n    oazapfts <spec> [filename]\n\n    Options:\n    --exclude, -e <tag to exclude>\n    --include, -i <tag to include>\n    --optimistic\n    --useEnumType\n    --useUnknown\n    --mergeReadWriteOnly\n    --argumentStyle=<${optsArgumentStyles.join(\" | \")}> (default: positional)\n`);\n  process.exit(1);\n}\n\nif (\n  argumentStyle !== undefined &&\n  !optsArgumentStyles.includes(argumentStyle)\n) {\n  console.error(\n    `--argumentStyle should be one of <${optsArgumentStyles.join(\n      \" | \",\n    )}>, but got \"${argumentStyle}\"`,\n  );\n  process.exit(1);\n}\n\ngenerate(spec, dest, {\n  include,\n  exclude,\n  optimistic,\n  useEnumType,\n  useUnknown,\n  mergeReadWriteOnly,\n  argumentStyle,\n});\n"],"names":["argv","minimist","generate","spec","dest","opts","code","generateSource","fs","include","exclude","optimistic","useEnumType","mergeReadWriteOnly","useUnknown","argumentStyle","optsArgumentStyles"],"mappings":";;;;AAOA,MAAMA,IAAOC,EAAS,QAAQ,KAAK,MAAM,CAAC,GAAG;AAAA,EAC3C,OAAO;AAAA,IACL,GAAG;AAAA,IACH,GAAG;AAAA,EAAA;AAAA,EAEL,SAAS,CAAC,cAAc,eAAe,sBAAsB,YAAY;AAAA,EACzE,QAAQ,CAAC,eAAe;AAC1B,CAAC;AAED,eAAeC,EAASC,GAAcC,GAAcC,GAAY;AAC9D,QAAMC,IAAO,MAAMC,EAAeJ,GAAME,CAAI;AAC5C,EAAID,IAAMI,EAAG,cAAcJ,GAAME,CAAI,IAChC,QAAQ,IAAIA,CAAI;AACvB;AAEA,MAAM;AAAA,EACJ,SAAAG;AAAA,EACA,SAAAC;AAAA,EACA,YAAAC;AAAA,EACA,aAAAC;AAAA,EACA,oBAAAC;AAAA,EACA,YAAAC;AAAA,EACA,eAAAC;AACF,IAAIf,GACE,CAACG,GAAMC,CAAI,IAAIJ,EAAK;AACrBG,MACH,QAAQ,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAWOa,EAAmB,KAAK,KAAK,CAAC;AAAA,CACpD,GACC,QAAQ,KAAK,CAAC;AAIdD,MAAkB,UAClB,CAACC,EAAmB,SAASD,CAAa,MAE1C,QAAQ;AAAA,EACN,qCAAqCC,EAAmB;AAAA,IACtD;AAAA,EAAA,CACD,eAAeD,CAAa;AAAA,GAE/B,QAAQ,KAAK,CAAC;AAGhBb,EAASC,GAAMC,GAAM;AAAA,EACnB,SAAAK;AAAA,EACA,SAAAC;AAAA,EACA,YAAAC;AAAA,EACA,aAAAC;AAAA,EACA,YAAAE;AAAA,EACA,oBAAAD;AAAA,EACA,eAAAE;AACF,CAAC;"}