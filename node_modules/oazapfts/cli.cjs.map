{"version":3,"file":"cli.cjs","sources":["../src/cli.ts"],"sourcesContent":["#!/usr/bin/env node\n\nimport fs from \"fs\";\nimport minimist from \"minimist\";\n\nimport { generateSource, Opts, optsArgumentStyles } from \"./\";\n\nconst argv = minimist(process.argv.slice(2), {\n  alias: {\n    i: \"include\",\n    e: \"exclude\",\n  },\n  boolean: [\"optimistic\", \"useEnumType\", \"mergeReadWriteOnly\", \"useUnknown\"],\n  string: [\"argumentStyle\"],\n});\n\nasync function generate(spec: string, dest: string, opts: Opts) {\n  const code = await generateSource(spec, opts);\n  if (dest) fs.writeFileSync(dest, code);\n  else console.log(code);\n}\n\nconst {\n  include,\n  exclude,\n  optimistic,\n  useEnumType,\n  mergeReadWriteOnly,\n  useUnknown,\n  argumentStyle,\n} = argv;\nconst [spec, dest] = argv._;\nif (!spec) {\n  console.error(`\n    Usage:\n    oazapfts <spec> [filename]\n\n    Options:\n    --exclude, -e <tag to exclude>\n    --include, -i <tag to include>\n    --optimistic\n    --useEnumType\n    --useUnknown\n    --mergeReadWriteOnly\n    --argumentStyle=<${optsArgumentStyles.join(\" | \")}> (default: positional)\n`);\n  process.exit(1);\n}\n\nif (\n  argumentStyle !== undefined &&\n  !optsArgumentStyles.includes(argumentStyle)\n) {\n  console.error(\n    `--argumentStyle should be one of <${optsArgumentStyles.join(\n      \" | \",\n    )}>, but got \"${argumentStyle}\"`,\n  );\n  process.exit(1);\n}\n\ngenerate(spec, dest, {\n  include,\n  exclude,\n  optimistic,\n  useEnumType,\n  useUnknown,\n  mergeReadWriteOnly,\n  argumentStyle,\n});\n"],"names":["argv","minimist","generate","spec","dest","opts","__async","code","generateSource","fs","include","exclude","optimistic","useEnumType","mergeReadWriteOnly","useUnknown","argumentStyle","optsArgumentStyles"],"mappings":";+RAOMA,EAAOC,EAAS,QAAQ,KAAK,MAAM,CAAC,EAAG,CAC3C,MAAO,CACL,EAAG,UACH,EAAG,SAAA,EAEL,QAAS,CAAC,aAAc,cAAe,qBAAsB,YAAY,EACzE,OAAQ,CAAC,eAAe,CAC1B,CAAC,EAED,SAAeC,EAASC,EAAcC,EAAcC,EAAY,QAAAC,EAAA,sBAC9D,MAAMC,EAAO,MAAMC,iBAAeL,EAAME,CAAI,EACxCD,EAAMK,EAAG,cAAcL,EAAMG,CAAI,EAChC,QAAQ,IAAIA,CAAI,CACvB,GAEA,KAAM,CACJ,QAAAG,EACA,QAAAC,EACA,WAAAC,EACA,YAAAC,EACA,mBAAAC,EACA,WAAAC,EACA,cAAAC,CACF,EAAIhB,EACE,CAACG,EAAMC,CAAI,EAAIJ,EAAK,EACrBG,IACH,QAAQ,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAWOc,EAAAA,mBAAmB,KAAK,KAAK,CAAC;AAAA,CACpD,EACC,QAAQ,KAAK,CAAC,GAIdD,IAAkB,QAClB,CAACC,EAAAA,mBAAmB,SAASD,CAAa,IAE1C,QAAQ,MACN,qCAAqCC,EAAAA,mBAAmB,KACtD,KAAA,CACD,eAAeD,CAAa,GAAA,EAE/B,QAAQ,KAAK,CAAC,GAGhBd,EAASC,EAAMC,EAAM,CACnB,QAAAM,EACA,QAAAC,EACA,WAAAC,EACA,YAAAC,EACA,WAAAE,EACA,mBAAAD,EACA,cAAAE,CACF,CAAC"}