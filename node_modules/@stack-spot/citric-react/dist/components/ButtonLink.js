import { jsx as _jsx } from "react/jsx-runtime";
import { listToClass } from '@stack-spot/portal-theme';
import { Children, useMemo } from 'react';
import { useCitricController } from '../context/hooks.js';
import { withRef } from '../utils/react.js';
import { asCitricProps, CitricComponent } from './CitricComponent.js';
/**
 * Renders a link with the appearance of a button.
 *
 * Whenever a link is clicked, the function `onClickLink` of the nearest CitricController is called with the event and the value of the
 * prop `metadata`.
 *
 * @example
 * ```
 * <ButtonLink href="#">My Button Link</ButtonLink>
 * ```
 */
export const ButtonLink = withRef(({ appearance, size, feedback, onClick, className, children, metadata, ...props }) => {
    const citric = useCitricController();
    const isAllLowercase = useMemo(() => !Children.toArray(children).some(c => typeof c === 'string' && c.toLocaleLowerCase() !== c), [children]);
    const linkProps = {
        component: 'button',
        className: listToClass([size, appearance, isAllLowercase && 'short-text', className]),
        onClick: (e) => {
            onClick?.(e);
            citric?.onClickLink?.(e, metadata);
        },
        'data-feedback': feedback || undefined,
        ...props,
    };
    return citric?.renderLink
        ? citric.renderLink(asCitricProps({ ...linkProps, children }))
        : _jsx(CitricComponent, { tag: "a", ...linkProps, children: children });
});
//# sourceMappingURL=ButtonLink.js.map