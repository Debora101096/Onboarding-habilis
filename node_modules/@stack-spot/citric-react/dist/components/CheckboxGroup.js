import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { isNil } from 'lodash';
import { useMemo } from 'react';
import { defaultRenderKey, defaultRenderLabel } from '../utils/options.js';
import { withRef } from '../utils/react.js';
import { CitricComponent } from './CitricComponent.js';
import { Column } from './layout.js';
/**
 * Renders a list of checkbox for multi-selection. One checkbox is rendered for each option.
 *
 * This component can be heavily customized via its properties. Check the storybook for complex examples.
 *
 * Tip: if you need to implement features like "search" and "select all", use the hook `useCheckboxGroupControls`.
 *
 * Tip: If you need a checkbox group that doesn't occupy much height, consider using a MultiSelect.
 *
 * @example
 *
 * ```
 * const options = useMemo(() => [
 *   { id: 1, name: 'Option 1' },
 *   { id: 2, name: 'Option 2' },
 *   { id: 3, name: 'Option 3' },
 * ], [])
 *
 * const [value, setValue] = useState<typeof options>([])
 *
 * return <CheckboxGroup options={options} renderLabel={o => o.name} renderKey={o => o.id} value={value} setValue={setValue} />
 * ```
 */
export const CheckboxGroup = withRef(function CheckboxGroup({ appearance = 'checkbox', name, value = [], options, onChange, renderLabel = defaultRenderLabel, renderKey = defaultRenderKey, renderItem, isDisabled, colorScheme, style, gap = '8px', focusable = true, ...props }) {
    const items = useMemo(() => {
        const valueKeys = value.map(renderKey);
        return options.map((o) => {
            const key = renderKey(o);
            const checkbox = _jsx(CitricComponent, { tag: "input", component: appearance, type: "checkbox", name: name, value: key, checked: value.includes(o) || (!isNil(key) && valueKeys.includes(key)), onChange: (e) => onChange?.(e.target.checked ? [...(value ?? []), o] : (value?.filter(item => item != o) ?? [])), disabled: isDisabled?.(o), tabIndex: focusable ? undefined : -1, colorScheme: colorScheme });
            return renderItem ? renderItem(checkbox, o) : (_jsxs(CitricComponent, { tag: "label", component: `${appearance}-row`, colorScheme: colorScheme, children: [checkbox, renderLabel(o)] }, key));
        });
    }, [options, value, name, colorScheme, appearance]);
    return _jsx(Column, { ...props, style: { gap, ...style }, children: items });
});
//# sourceMappingURL=CheckboxGroup.js.map