import { listToClass } from '@stack-spot/portal-theme'
import { withRef } from '../utils/react'
import { CitricComponent } from './CitricComponent'

export interface BaseFieldGroupProps {
  /**
   * When this is true, the component will automatically mark the addons.
   * 
   * When this is false, you must add the class "addon" manually to each of the addons.
   * 
   * @default true 
   */
  auto?: boolean,
  /**
   * When this is true, the FieldGroup will occupy all the width available instead of just what its children need.
   * 
   * @default false
   */
  fullWidth?: boolean,
}

export type FieldGroupProps = React.JSX.IntrinsicElements['div'] & BaseFieldGroupProps

/**
 * A FieldGroup is used to concatenate an input with other UI elements, like icons and buttons.
 * 
 * @example
 * A search field, with a search icon and a button to submit the search.
 * ```
 * <FieldGroup>
 *   <Icon icon="Search" />
 *   <Input type="search" />
 *   <Button colorScheme="light">Submit</Button>
 * </FieldGroup>
 * ```
 */
export const FieldGroup = withRef(({ auto = true, fullWidth, className, children, ...props }: FieldGroupProps) => (
  <CitricComponent
    tag="div"
    component="field-group"
    className={listToClass([className, auto && 'auto', fullWidth && 'full-width'])}
    {...props}
  >
    {children}
  </CitricComponent>
))
