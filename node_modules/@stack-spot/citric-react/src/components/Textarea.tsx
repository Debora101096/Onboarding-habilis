import React from 'react'
import { ControlledTextarea, WithColorScheme } from '../types'
import { withRef } from '../utils/react'
import { CitricComponent } from './CitricComponent'

export interface BaseTextareaProps extends WithColorScheme {
  value?: string,
  onChange?: (value: string) => void,
  ref?: React.MutableRefObject<HTMLTextAreaElement | null>,
}

export type TextareaProps = ControlledTextarea & BaseTextareaProps

/**
 * Renders a textarea HTML element. With the difference that the value is not determined by the children, but the property "value" instead.
 * 
 * Attention: "onChange" receives the new value, not the event.
 * 
 * @example
 * ```
 * const [value, setValue] = useState('')
 * return <Textarea value={value} onChange={setValue} />
 * ```
 */
export const Textarea = withRef(({ value, onChange, ...props }: TextareaProps) =>
  <CitricComponent tag="textarea" component="textarea" value={value} onChange={e => onChange?.(e.target.value)} {...props} />,
)
