import { listToClass } from '@stack-spot/portal-theme'
import { HTMLTag, WithColorPalette, WithColorScheme } from '../types'
import { withRef } from '../utils/react'
import { CitricComponent } from './CitricComponent'

type ValidTags = 'a' | 'button' | 'li' | 'div' | 'span'

export interface BaseBadgeProps<T extends ValidTags = ValidTags> extends WithColorPalette, WithColorScheme {
  /**
   * @default 'div'
   */
  tag?: T,
  /**
   * Determines how round the corners are.
   * 
   * @default 'circle'
   */
  appearance?: 'square' | 'circle',
}

export type BadgeProps<T extends ValidTags> = HTMLTag[T] & BaseBadgeProps<T>

/**
 * Renders a badge. Badges have different color grades depending if they're focusable or not. Use `colorPalette` do determine the main
 * color.
 * 
 * @example
 * ```
 * <Badge>
 *   <Icon icon="PlusMini" />
 *   My first badge
 * </Badge>
 * ```
 */
export const Badge = withRef(
  function Badge<T extends ValidTags>({ tag, appearance, className, children, ...props }: BadgeProps<T>) {
    return (
      <CitricComponent tag={tag || 'div'} component="badge" className={listToClass([appearance, className])} {...props as any}>
        {children}
      </CitricComponent>
    )
  },
)


// export const Badge = withRef(_Badge)

