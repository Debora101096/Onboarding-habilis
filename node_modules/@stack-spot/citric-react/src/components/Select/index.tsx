import { withRef } from '../../utils/react'
import { RichSelect } from './RichSelect'
import { SimpleSelect } from './SimpleSelect'
import { SelectProps } from './types'
export type * from './types'

/**
 * Renders a Select form component. By default, it renders a rich, fully styled component (rich = true). You can set `rich = false` to use
 * only the default select of the browser.
 * 
 * The default select from the browser is also rendered when `rich = true`, but it is only accessible when navigating with the keyboard
 * (accessibility).
 * 
 * This Select is searchable! You just need to set `searchable = true`.
 * 
 * Attention: this component doesn't accept children, instead of manually writing the tag "option", use the property "options".
 * 
 * @example
 * 
 * ```
 * const options: = useMemo(() => [
 *   { id: 1, name: 'Lorem' },
 *   { id: 2, name: 'Ipsum' },
 *   { id: 3, name: 'Dolor' },
 * ], [])
 * const [value, setValue] = useState(options[0])
 * 
 * return <Select options={options} renderLabel={o => o.name} renderKey={o => o.id} value={value} onChange={setValue} />
 * ```
 */
export const Select = withRef(
  function Select<T>(props: SelectProps<T>) {
    return props.type === 'simple' ? <SimpleSelect {...props} /> : <RichSelect {...props} />
  },
)
