import { useMemo } from 'react'
import { withRef } from '../utils/react'
import { CitricComponent } from './CitricComponent'
import { Link } from './Link'

interface BreadCrumbItem {
  label: string,
  href?: string,
}

export interface BaseBreadcrumbProps {
  items: BreadCrumbItem[],
}

export type BreadcrumbProps = React.JSX.IntrinsicElements['nav'] & BaseBreadcrumbProps

/**
 * Renders a simple navigation bar with links to the previous pages.
 * 
 * @example
 * ```
 * <Breadcrumb items={[{ label: 'Home', href: '/' }, { label: 'Settings', href: '/settings' }, { label: 'Profile' }]} />
 * ```
 */
export const Breadcrumb = withRef(({ items, ...props }: BreadcrumbProps) => {
  const children = useMemo(
    () => items.map(
      (item, index) => item.href ? <li key={index}><Link href={item.href}>{item.label}</Link></li> : <li key={index}>{item.label}</li>,
    ),
    [items],
  )
  return <CitricComponent tag="nav" component="breadcrumb" {...props}><ul>{children}</ul></CitricComponent>
})
