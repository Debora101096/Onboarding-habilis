import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
import { Button, LinkBox, Text } from '@citric/core';
import { listToClass, theme } from '@stack-spot/portal-theme';
import { useTranslate } from '@stack-spot/portal-translate';
import { useState } from 'react';
import { styled } from 'styled-components';
import { Forbidden } from '../../svg/Forbidden.js';
import { Logo } from '../../svg/Logo.js';
import { NotFound } from '../../svg/NotFound.js';
import { ServerError } from '../../svg/ServerError.js';
import { Unauthenticated } from '../../svg/Unauthenticated.js';
const imageStyle = {
    width: '200px',
    height: '200px',
};
const imageMap = {
    401: _jsx(Unauthenticated, { style: imageStyle }),
    403: _jsx(Forbidden, { style: imageStyle }),
    404: _jsx(NotFound, { style: imageStyle }),
};
const FeedbackBox = styled.div `
  background-color: ${theme.color.light[400]};
  padding: 24px;
  .content {
    display: flex;
    justify-content: center;
    align-items: center;
    &.row {
      flex-direction: row;
      gap: 40px;
    }
    &.column {
      flex-direction: column;
      .text-content {
        align-items: center;
      }
    }
    .text-content {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .buttons {
      display: flex;
      flex-direction: row;
      gap: '10px';
    }
    .details {
      background-color: ${theme.color.danger[500]};
      color: ${theme.color.danger.contrastText};
      padding: 12px;
      border-radius: 5px;
    }
  }
`;
/**
 * A box with an icon and an error message. This is used for giving error feedbacks to the user.
 *
 * If the application is in debug mode, a button is rendered to show the error message.
 *
 * @param options the error code, the error message and whether or not the application is in debug mode.
 */
export const ErrorFeedback = ({ code = 0, message, debug, title, body, image, action, description, help, direction = 'row', style, className }) => {
    const t = useTranslate(dictionary);
    const [showDetails, setShowDetails] = useState(false);
    const shouldShowButtons = !!(action || (debug && message));
    function renderBody() {
        return typeof body === 'string' ? _jsx(Text, { appearance: "body1", colorScheme: "inverse", className: "description", children: body }) : body;
    }
    return (_jsx(FeedbackBox, { style: style, className: className, children: _jsxs("div", { className: listToClass(['content', direction]), children: [_jsx("div", { className: "image", children: image ?? imageMap[code] ?? _jsx(ServerError, { style: imageStyle }) }), _jsxs("div", { className: "text-content", children: [_jsx(LinkBox, { href: "/", className: "logo", children: _jsx(Logo, { style: { width: '130px', height: '30px' } }) }), _jsxs(Text, { appearance: "h4", mt: 5, colorScheme: "inverse", className: "title", children: [(code && !title) ? `${t.errorLabel} ${code}. ` : '', _jsx(Text, { appearance: "h4", as: "span", colorScheme: "light.700", children: title ?? t[`${code}.title`] })] }), body ? renderBody() : (_jsxs(_Fragment, { children: [_jsx(Text, { appearance: "body1", mt: 5, colorScheme: "inverse", className: "description", sx: {
                                        maxWidth: '70ch',
                                        whiteSpace: 'normal',
                                        wordBreak: 'break-word',
                                    }, children: description ?? t[`${code}.description`] }), _jsx(Text, { appearance: "body1", colorScheme: "light.700", className: "help", children: help ?? t[`${code}.help`] })] })), shouldShowButtons && (_jsxs("div", { className: "buttons", children: [action && (_jsx(Button, { colorScheme: "inverse", onClick: action.onClick, children: action.label })), debug && message && (_jsx(Button, { appearance: "outlined", colorScheme: "inverse", onClick: () => setShowDetails(v => !v), children: showDetails ? t.hideDetails : t.showDetails }))] })), showDetails && (_jsx("div", { className: "details", children: _jsx(Text, { appearance: "microtext1", children: message }) }))] })] }) }));
};
const dictionary = {
    en: {
        altLogo: 'Logo Stackspot',
        '0.title': 'Something didn’t go as expected',
        '0.description': 'This can happen from time to time. Try refreshing the page. If it still doesn’t work, reach out. We’re here to help.',
        '401.title': 'You need a valid credential',
        '401.description': 'We couldn’t verify your credentials. Check the link or log in with a different account to continue.',
        '403.title': 'Access restricted to your organization',
        '403.help': 'Log in with an account from your organization or request access from your Account Holder.',
        '404.title': 'This resource is no longer available',
        '404.description': 'It may have been moved or removed. You can try again or ask your organization’s Account Holder for a new link.',
        '500.title': 'We\'re making some adjustments',
        '500.description': 'Something unexpected happened on our side. It might just be a momentary glitch. Try refreshing later to pick up where you left off.',
        showDetails: 'Show Details',
        hideDetails: 'Hide Details',
        errorLabel: 'Error',
    },
    pt: {
        altLogo: 'Logo Stackspot',
        '0.title': 'Algo saiu diferente do esperado',
        '0.description': 'Isso pode acontecer de vez em quando. Tente recarregar a página. Se ainda não funcionar, chama a gente. Estamos por aqui para ajudar.',
        '401.title': 'Você precisa de uma credencial válida',
        '401.description': 'Não conseguimos confirmar suas credenciais. Verifique o link ou faça login com outra conta para continuar.',
        '403.title': 'Acesso exclusivo da sua organização',
        '403.help': 'Faça login com uma conta da sua organização ou peça acesso ao Account Holder.',
        '404.title': 'Este recurso não está mais disponível',
        '404.description': 'Ele pode ter sido movido ou removido. Você pode tentar de novo ou pedir um novo link ao Account Holder da sua organização.',
        '500.title': 'Estamos ajustando o sistema',
        '500.description': 'Algo inesperado aconteceu do nosso lado. Pode ser só por alguns instantes. Tente recarregar mais tarde para continuar de onde parou.',
        showDetails: 'Ver Detalhes',
        hideDetails: 'Esconder Detalhes',
        errorLabel: 'Erro',
    },
};
//# sourceMappingURL=ErrorFeedback.js.map