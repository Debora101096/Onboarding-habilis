import { Button, Text } from '@citric/core'
import { ButtonProps } from '@citric/core/dist/Button'
import { LoadingCircular } from '@citric/ui'
import { ReactNode } from 'react'

interface Props extends ButtonProps {
  isLoading?: boolean,
  loadingSize?: 'sm' | 'md' | 'lg',
  children: ReactNode,
  onClick?: () => void,
}

export const ButtonLoading = ({ isLoading, loadingSize = 'sm', children, disabled, sx, ...props }: Props) => (
  <Button
    type="submit"
    {...props}
    disabled={isLoading || disabled}
    sx={{ ...sx, position: 'relative' }}
  >
    <Text as="span" sx={{ visibility: isLoading ? 'hidden' : 'visible' }}>
      {children}
    </Text>
    <LoadingCircular
      colorScheme={props.colorScheme}
      size={loadingSize}
      sx={{ visibility: isLoading ? 'visible' : 'hidden', position: 'absolute' }}
    />
  </Button>
)
