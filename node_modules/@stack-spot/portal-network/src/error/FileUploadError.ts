import { HttpValidationError } from '../api/ai'
import { StackspotAPIError } from './StackspotAPIError'

export class FileUploadError extends StackspotAPIError {
  readonly fileName: string

  constructor(fileName: string, error: any) {
    super({
      status: error.status,
      headers: error.headers,
      stack: error.stack,
      message: error instanceof StackspotAPIError
        ? error.message
        : (error.data as HttpValidationError | undefined)?.detail?.map(d => d.msg)?.join('\n'),
    })
    this.fileName = fileName
  }
}
