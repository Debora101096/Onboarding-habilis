import { HttpError } from '@oazapfts/runtime'

import { DefaultAPIError } from '../error/DefaultAPIError'
import { StackspotAPIError } from '../error/StackspotAPIError'
import { ReactQueryNetworkClient } from '../network/ReactQueryNetworkClient'
import { removeAuthorizationParam } from '../utils/remove-authorization-param'
import { associateWithWorkspaceEnvironment, createAddon, createDeployTemplate, createOrganization, createRuntime1, createTenant1, defaults, deploy, findApplicationDeploymentById, getApplicationDeploymentHealth, getApplicationDeploymentLogs, getAssociationWorkspaceEnvironmentByRuntimeId, getOrganizationById, getOrganizations, getRuntime1, getTenant1, listAddon, listApplicationDeploymentRollouts, listApplicationDeployments, listAssociations, listDeployTemplate, listRuntimes, listRuntimes1, listTenants, listTenants1, postApplicationDeploymentRolloutAction } from '../api/cloudPlatformHorizon'
import { baseDictionary } from '../error/dictionary/base'
import { getApiAddresses } from '../api-addresses'

class CloudPlatformHorizonClient extends ReactQueryNetworkClient {
  constructor() {
    super(getApiAddresses().cloudPlatformHorizon.url, defaults)
  }

  protected buildStackSpotError(error: HttpError): StackspotAPIError {
    return new DefaultAPIError(error.data, error.status, baseDictionary, error.headers)
  }
  /**
   * Get a list of organizations
   */
  listOrganizations = this.query(removeAuthorizationParam(getOrganizations))
  /**
   * Get organization by id
   */
  getOrganizationById = this.query(removeAuthorizationParam(getOrganizationById))
  /**
   * Get details of an tenant
   */
  getTenantById = this.query(removeAuthorizationParam(getTenant1))
  /**
   * Get details of an runtime
   */
  getRuntimeById = this.query(removeAuthorizationParam(getRuntime1))
  /**
   * Create an tenant
   */
  createTenant = this.mutation(removeAuthorizationParam(createTenant1))
  /**
   * Create an runtime
   */
  createRuntime = this.mutation(removeAuthorizationParam(createRuntime1))
  /**
   * Create an organization
   */
  createOrganization = this.mutation(removeAuthorizationParam(createOrganization))
  /**
   * List all runtimes
   */
  listRuntimes = this.query(removeAuthorizationParam(listRuntimes))
  /**
   * List all tenants
   */
  listTenants = this.query(removeAuthorizationParam(listTenants))
  /**
   * List tenants from organization
   */
  listTenantsByOrganization = this.query(removeAuthorizationParam(listTenants1))
  /**
   * List runtimes from tenant
   */
  listRuntimesByTenant = this.query(removeAuthorizationParam(listRuntimes1))
  /**
   * List applications deployments from runtime
   */
  listApplicationsDeployments = this.query(removeAuthorizationParam(listApplicationDeployments))
  /**
   * Deploy an application
   */
  deployApplication = this.mutation(removeAuthorizationParam(deploy))
  /**
   * Get details of an application deployment
   */
  getApplicationDeploymentById = this.query(removeAuthorizationParam(findApplicationDeploymentById))
  /**
   * Get logs from a application deployment
   */
  getApplicationDeploymentLogs = this.query(removeAuthorizationParam(getApplicationDeploymentLogs))
  /**
   * Get health from a application deployment
   */
  getApplicationDeploymentHealth = this.query(removeAuthorizationParam(getApplicationDeploymentHealth))
  /**
   * Get a list of organization addons
   */
  listAddons = this.query(removeAuthorizationParam(listAddon))
  /**
   * Get a list of organization deploy templates
   */
  listDeployTemplates = this.query(removeAuthorizationParam(listDeployTemplate))
  /**
   * Create an addon
   */
  createAddon = this.mutation(removeAuthorizationParam(createAddon))
  /**
   * Create an deploy template
   */
  createDeployTemplate = this.mutation(removeAuthorizationParam(createDeployTemplate))
  /**
   * Associate an runtime with an workspace environment
   */
  associateRuntimeWithWorkspaceEnv = this.mutation(removeAuthorizationParam(associateWithWorkspaceEnvironment))
  /**
   * Retrieves associate runtime with a workspace's environment
   */
  getRuntimeAssociations = this.query(removeAuthorizationParam(getAssociationWorkspaceEnvironmentByRuntimeId))
  /**
   * List runtime associations to workspace's environment
   */
  listRuntimeAssociationsToEnv = this.query(removeAuthorizationParam(listAssociations))
  /**
  * List of application deployments rollout
  */
  listApplicationDeploymentRollouts = this.query(removeAuthorizationParam(listApplicationDeploymentRollouts))
  /**
  * Set an action to application deployment rollout
  */
  deployApplicationRolloutAction = this.mutation(removeAuthorizationParam(postApplicationDeploymentRolloutAction))
}

export const cloudPlatformHorizonClient = new CloudPlatformHorizonClient()
